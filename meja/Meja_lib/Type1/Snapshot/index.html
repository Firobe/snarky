<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Snapshot (meja.Meja_lib.Type1.Snapshot)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">meja</a> &#x00BB; <a href="../../index.html">Meja_lib</a> &#x00BB; <a href="../index.html">Type1</a> &#x00BB; Snapshot</nav><header class="odoc-preamble"><h1>Module <code><span>Type1.Snapshot</span></code></h1><p>Implements a weak, mutable linked-list containing the history of changes.</p><p>Every change is added to the same list, and the snapshots correspond to cuts of this list. We gain several advantages from using a weak, mutable linked-list: * if there are no active snapshots, the whole list will be GC'd and any changes don't need to be stored at all * if there are active snapshots, OCaml will GC the history of changes up to the first active snapshot * all simultaneously active snapshots point to a part of the same physical list * the snapshots can be erased during backtracking, so that different snapshots can't be used out of order to 'restore' a state that didn't exist previously</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Get a new snapshot.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_to_history" class="anchored"><a href="#val-add_to_history" class="anchor"></a><code><span><span class="keyword">val</span> add_to_history : <span><a href="../index.html#type-change">change</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Add a change to the history of all active snapshots.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-backtrack" class="anchored"><a href="#val-backtrack" class="anchor"></a><code><span><span class="keyword">val</span> backtrack : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-change">change</a> list</span></span></code></div><div class="spec-doc"><p>Erase the history back to the snapshot, and return the list of changes that occurred since, ordered from newest to oldest.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-filtered_backtrack" class="anchored"><a href="#val-filtered_backtrack" class="anchor"></a><code><span><span class="keyword">val</span> filtered_backtrack : <span>f:<span>(<span><a href="../index.html#type-change">change</a> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-change">change</a> list</span></span></code></div><div class="spec-doc"><p>Erase all changes matching the filter <code>f</code> back to the snapshot, and return the erased changes, ordered from newest to oldest.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-debug_print" class="anchored"><a href="#val-debug_print" class="anchor"></a><code><span><span class="keyword">val</span> debug_print : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-debug_print_latest" class="anchored"><a href="#val-debug_print_latest" class="anchor"></a><code><span><span class="keyword">val</span> debug_print_latest : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div></div></body></html>